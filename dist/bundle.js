var e,c,n,t;e=module.exports,c="transcribe",n=()=>b,Object.defineProperty(e,c,{get:n,set:t,enumerable:!0,configurable:!0});const s={desc:"е -> je am Wortanfang, nach ь / ъ / Vokalen",cond:({c:e,prev:c,isVowel:n})=>"е"===e&&(n(c)||["","ь","ъ"].includes(c)),val:"je",range:[-1,1]},r=[{desc:"кс -> x",cond:({c:e,next:c})=>"к"===e&&"с"===c,val:"x",range:[0,2]},{cond:({c:e,prev:c})=>"с"===e&&"к"===c,val:""}],o={desc:"с -> ss zwischen zwei Vokalen",cond:({c:e,isVowel:c,prev:n,next:t})=>"с"===e&&c(n)&&c(t),val:"ss",range:[-1,2]},i=[{desc:"й -> j zwischen zwei Vokalen",cond:({c:e,prev:c,next:n,isVowel:t})=>"й"===e&&t(c)&&t(n),val:"j",range:[-1,2]},{desc:"ьи -> ji, ьо -> jo",cond:({c:e,next:c})=>"ь"===e&&["i","и","о"].includes(c),val:"j",range:[0,2]}],a=[{from:"be",to:"de",dict:{"а":"a","б":"b","в":"w","г":"h","д":"d","е":"e","ё":"jo","ж":"sh","з":"s","і":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ў":"u","ф":"f","х":"ch","ц":"z","ч":"tsch","ш":"sch","ы":"y","ь":"","э":"e","ю":"ju","я":"ja"},rules:[s,...r,o,...i,{desc:"й nicht wiedergegeben nach ы und і",cond:({c:e,prev:c})=>"й"===e&&["ы","і"].includes(c),val:"",range:[-1,1]},{desc:"V statt W am Wortbeginn (gebräuchliche Namensschreibung)",cond:({c:e,w:c})=>"в"===e&&!!c.match(/^(валянцін|віктар|веранік)/i),val:"v"}]},{from:"be",to:"en",dict:{"а":"a","б":"b","в":"v","г":"h","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","і":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ў":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","ы":"y","ь":"","э":"e","ю":"yu","я":"ya"}},{from:"be",to:"scientific",dict:{"а":"a","б":"b","в":"v","г":"h","д":"d","е":"e","ё":"ё","ж":"ž","з":"z","і":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ў":"ŭ","ф":"f","х":"ch","ц":"c","ч":"č","ш":"š","ы":"y","ь":"ʹ","э":"ė","ю":"ju","я":"ja","'":"’","’":"’","ʼ":"’"}}],d=[{from:"ru",to:"de",dict:{"а":"a","б":"b","в":"w","г":"g","д":"d","е":"e","ё":"jo","ж":"sh","з":"s","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"ch","ц":"z","ч":"tsch","ш":"sch","щ":"schtsch","ъ":"","ы":"y","ь":"","э":"e","ю":"ju","я":"ja"},rules:[s,...r,o,...i,{desc:"й nicht wiedergegeben nach ы und и",cond:({c:e,prev:c})=>"й"===e&&["ы","и"].includes(c),val:"",range:[-1,1]},{desc:"ё -> o nach ж / ч / ш / щ",cond:({c:e,prev:c})=>"ё"===e&&["ж","ч","ш","щ"].includes(c),val:"o",range:[-1,1]},{desc:"-ого/-его -> -owo/-ewo am Wortende",cond:({c:e,prev:c,next:n,charAtPos:t})=>"г"===e&&["е","о"].includes(c)&&"о"===n&&""===t(2),val:"w",range:[-1,2]},{desc:"Александр -> Alexander (gebräuchliche Namensschreibung)",cond:({c:e,w:c})=>"д"===e&&"александр"===c,val:"de",range:[0,2]},{desc:"Дмитрий -> Dimitri (gebräuchliche Namensschreibung)",cond:({c:e,w:c})=>"д"===e&&"дмитрий"===c,val:"di",range:[0,2]},{desc:"j statt i am Wortende (gebräuchliche Namensschreibung)",cond:({c:e,w:c})=>"й"===e&&["алексей","сергей"].includes(c),val:"j"},{desc:"V statt W am Wortbeginn (gebräuchliche Namensschreibung)",cond:({c:e,w:c})=>"в"===e&&!!c.match(/^(валентин|виктор|вероник)/i),val:"v"}]},{from:"ru",to:"en",dict:{"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"sch","ъ":"","ы":"i","ь":"","э":"e","ю":"yu","я":"ya"}},{from:"ru",to:"scientific",dict:{"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"ё","ж":"ž","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"ch","ц":"c","ч":"č","ш":"š","щ":"šč","ъ":"ʺ","ы":"y","ь":"ʹ","э":"ė","ю":"ju","я":"ja","'":"’","’":"’","ʼ":"’"}}],h=[{from:"uk",to:"de",dict:{"а":"a","б":"b","в":"w","г":"h","ґ":"g","д":"d","е":"e","є":"e","ж":"sh","з":"s","и":"y","і":"i","ї":"ji","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"ch","ц":"z","ч":"tsch","ш":"sch","щ":"schtsch","ь":"","ю":"ju","я":"ja","'":"","’":"","ʼ":""},rules:[{desc:"є -> je am Wortanfang, nach ь und Vokalen",cond:({c:e,prev:c,isVowel:n})=>"є"===e&&(n(c)||["","ь"].includes(c)),val:"je",range:[-1,1]},...r,o,{desc:"й nicht wiedergegeben nach и",cond:({c:e,prev:c})=>"й"===e&&"и"===c,val:"",range:[-1,1]},...i,{desc:"V statt W am Wortbeginn (gebräuchliche Namensschreibung)",cond:({c:e,w:c})=>"в"===e&&!!c.match(/^(валентин|віктор|веронік)/i),val:"v"}]},{from:"uk",to:"en",dict:{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":"ie","ж":"zh","з":"z","и":"y","і":"i","ї":"i","й":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"ts","ч":"ch","ш":"sh","щ":"shch","ь":"","ю":"iu","я":"ia","'":"","’":"","ʼ":""},rules:[{desc:"є -> ye at the beginning of the word",cond:({c:e,prev:c})=>"є"===e&&""===c,val:"ye"},{desc:"ї -> yi at the beginning of the word",cond:({c:e,prev:c})=>"ї"===e&&""===c,val:"yi"},{desc:"й -> y at the beginning of the word",cond:({c:e,prev:c})=>"й"===e&&""===c,val:"y"},{desc:"ю -> yu at the beginning of the word",cond:({c:e,prev:c})=>"ю"===e&&""===c,val:"yu"},{desc:"я -> ya at the beginning of the word",cond:({c:e,prev:c})=>"я"===e&&""===c,val:"ya"},{desc:"зг -> zgh",cond:({c:e,prev:c})=>"г"===e&&"з"===c,val:"gh",range:[-1,1]}]},{from:"uk",to:"scientific",dict:{"а":"a","б":"b","в":"v","г":"h","ґ":"g","д":"d","е":"e","є":"je","ж":"ž","з":"z","и":"y","і":"i","ї":"ji","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"ch","ц":"c","ч":"č","ш":"š","щ":"šč","ь":"ʹ","ю":"ju","я":"ja","'":"’","’":"’","ʼ":"’"}}],l=["а","е","є","ё","и","і","ї","о","у","ы","ю","э","я"];function u(e){return l.includes(e)}function g(e="",c="",n=""){return p(n)?e.toUpperCase():p(c)?function(e){const[c,...n]=e;return c?[c.toUpperCase(),...n].join(""):""}(e):e}function p(e){return e===e.toUpperCase()}class f{constructor(e,c=!1){this.def=e,this.alphabet=Object.keys(this.def.dict),this.appliedRules=[],this.debug=c}transcribe(e=""){const c=(e=e.normalize()).split(" ");let n=e;for(let e of c)e=this.clean(e),n=n.replace(e,this.transcribeWord(e));const{appliedRules:t,def:s}=this;return{output:n,appliedRules:t,from:s.from,to:s.to}}transcribeWord(e=""){return e.trim().split("").reduce(((c,n,t,s)=>c+g(this.getRuleBasedChar(n,t,s,e)??this.getDictChar(n)??n,n,e)),"")}getRuleBasedChar(e,c,n,t){const s=e=>this.normalize(n[c+e]),r={c:this.normalize(e),w:this.normalize(t),char:e,charAtPos:s,prev:s(-1),next:s(1),isVowel:u};this.debug&&console.log(r);for(const e of this.def.rules||[]){const{desc:n,cond:s,val:o,range:i=[0,1]}=e;if(s(r)){const e={description:n,word:t,affectedLetters:[c+i[0],c+i[1]]};return n&&this.appliedRules.push(e),o}}}getDictChar(e){return this.def.dict[e.toLowerCase()]}normalize(e=""){const c=new RegExp(`[${this.alphabet.join()}]`,"i");return e.match(c)?e.toLowerCase():""}clean(e){const c=new RegExp(`([^${this.alphabet.join()}]+)$`,"ig");return e.replace(c,"")}}const v=[...a,...d,...h],m={from:"ru",to:"en",showDetails:!1};function b(e="",c={}){const n={...m,...c},{from:t,to:s,showDetails:r,debug:o}=n,i=v.find((e=>e.from===t&&e.to===s));if(!i){console.error(`No language module ${t}-${s} found`);const c={output:e,appliedRules:[],from:t,to:s};return r?c:c.output}const a=new f(i,!!o).transcribe(e);return r?a:a.output}
//# sourceMappingURL=bundle.js.map
